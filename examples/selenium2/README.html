<html>
  <head>
  <style>
  body {
  margin: 0px;
}
* {
  line-height: 145%;
}
h1, h2, h3, h4, .copyright {
  font-family: Arial, Helvetica, SansSerif;
}
div, span, p, li, td, th, h4 {
  font-family: Arial, Helvetica, SansSerif;
  font-size: 10pt;  
}
code, pre {
  font-size: 10pt;  
}
li {
  margin-top: 6px;
  margin-bottom: 8px;
}
tt, tt *, pre, code, pre *, code * {
  font-family: Courier New, Courier, Fixed;
  font-size: 10pt;
}
pre {
  padding: 8px;
  margin-left: 40px;
  margin-right: 0px;
  background-color: white;
}

h1 {
  margin-top: 16px;  
  font-size: 24pt;
}
h2 {
  margin-top: 32px;
}
h3, h3 * {
  font-size: 12pt;
}
h4 {
  font-size: 10pt;
}
.content {
  background-color: #fcfcfa;
  margin: 0px 0px 0px 0px;
  padding: 20px 64px 50px 64px;
}
.copyright {
  width: 950px;
  margin: 0px auto;
  text-align: right;
  padding: 8px;
  background-color: white;
}
.copyright, .copyright * {
  font-size: 9pt;
  color: #333;
}

  </style>
  <title>Concordion Extensions Selenium2 Example</title>
  </head>
  <body>
    <div class="page">
    <div class="content">
    <h1>Concordion-Extensions Selenium2 Example</h1>
    <h2>Introduction</h2>

    <p>This project demonstrates the usage of <a href="http://concordion.org/">Concordion</a> <a href="http://concordion.org/Extensions.html">extensions</a> with <a href="http://code.google.com/p/selenium/w/list">Selenium WebDriver</a>.</p>
    <p>The ExtensionsDemo index links to and runs the following tests:</p>
    <ul>
    <li>ScreenshotDemo demonstrates the <a href="http://concordion.org/extensions/ScreenshotExtension.html">ScreenshotExtension</a>.</li>
    <li>LoggingDemo demonstrates the <a href="http://concordion.org/extensions/LoggingTooltipExtension.html">LoggingTooltipExtension</a>.</li>
    <li>ExceptionTranslatorDemo demonstrates the <a href="http://concordion.org/extensions/TranslatorExtension.html">TranslatorExtension</a>.</li>
    </ul>
    
    <h2>Running the tests</h2>
    <p>The tests use Selenium's FirefoxDriver, so you'll need to have Firefox installed (or you could try changing the code to use a different driver).</p>
    
    <p>The download includes support to run the tests with either <a href="http://www.gradle.org/">Gradle</a> or <a href="http://maven.apache.org/">Maven</a>.</p>  
    
    <h3>Using Gradle</h3>
    <ol>
      <li><a href="http://www.gradle.org/downloads.html">Download</a> and <a href="http://www.gradle.org/installation.html">install</a> Gradle (this has been tested with 1.0-milestone-3)</li>
      <li>Unzip this package</li>
      <li>From a command line opened at the location to which this package has been unzipped:
          <ul>
            <li><code>gradle test</code></li>
          </ul>
      <li>view the Concordion output under the subfolder 'build/reports/spec/org/concordion/ext/demo/selenium/'</li>
    </ol>
    
    <h3>Using Maven</h3>
    <ol>
      <li>Download and install maven (this has been tested with 3.0.3)</li>
      <li>Unzip this package</li>
      <li>From a command line opened at the location to which this package has been unzipped:
        <ul>
          <li><code>mvn test</code></li>
        </ul>
      </li>
      <li>view the Concordion output under the subfolder 'target/concordion/org/concordion/ext/demo/selenium/'</li>
    </ol> 
    
    <h2>Optional - Generate an Eclipse Project</h2>
    <p>If you use Eclipse and want to generate an Eclipse project:</p>
      <ol>
      <li><a href="http://www.gradle.org/downloads.html">Download</a> and <a href="http://www.gradle.org/installation.html">install</a> Gradle (this has been tested with v1.0-milestone-3)</li>
        <li>Unzip this package</li>
      <li>From a command line opened at the location to which this package has been unzipped:
          <ul>
            <li><code>gradle eclipse</code></li>
          </ul>
        </li>
        <li>import this project into  Eclipse (File > Import > Existing Project into Workspace, select the path to this project, then select concordion-extensions-demo-selenium2).  Make sure the workspace is in a different folder than the project.</li>
        <li>under src/test/java, expand org.concordion.ext.demo.selenium, and run each of the tests LoggingDemoTest and ScreenshotDemoTest using Run As > JUnit Test</li>
      </ol>
      
      <p>The dependencies are listed in build.gradle, and will be downloaded by Gradle.</p>  

      <h2>What you should see</h2>
    <p>The tests will open a Firefox browser and perform some Google searches.</p>
    
    <h3>JUnit output</h3>
    <p>The tests should pass successfully, though the console output for the ScreenshotDemo and ExceptionTranslatorDemo tests will show failures and exceptions with the message:</p>
    <pre>
       <-- Note: This test has been marked as EXPECTED_TO_FAIL
    </pre> 
    <p>These tests deliberately contains failures in order to demonstrate features. 
    They uses Concordion's <code>@ExpectedToFail</code> annotation to keep the JUnit passing (you'd normally only use this when you have a partially implemented feature).</p>
    
    <h3>Concordion output</h3>
    The output folder should contain 4 specifications:
    <h4>ExtensionsDemo.html</h4>
    <p>This contains links to the following specifications.</p>
    
    <h4>ScreenshotDemo.html</h4>
    <p>This should show a failing example (red). Hovering the mouse over the failing example will show a screenshot taken when the failure occurred. Clicking on the failure will open the
    screenshot.</p> 
    <p>The screenshot extension is configured with a custom <code>SeleniumScreenshotTaker</code> class that uses Selenium's <a href="http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/TakesScreenshot.html">TakesScreenshot</a> interface to take a 
       screenshot of the web page.  The extension has a number of <a href="http://concordion.org/extensions/ScreenshotExtension.html#Configuration">configuration options</a>, for example to also take screenshots on successful examples and to set the image width.
       It can also be used to <a href="http://concordion.org/extensions/ScreenshotExtension.html#Explicit_screenshots">explicitly add screenshots</a> to the Concordion output.</p>

    <h4>LoggingDemo.html</h4>
     <p>This should show 2 blue information icons.  Hover over these icons to show information logged during the running of the example.</p>
     <p>The bulk of the output is logged by the <code>SeleniumEventLogger</code> class, which implements <a href="http://webdriver.googlecode.com/svn/javadoc/org/openqa/selenium/support/events/WebDriverEventListener.html">WebDriverEventListener</a>. 
     The result text is logged from the <code>GoogleResultsPage</code>.</p>
     <p>Logging the implementation details in this way allows us to "<a href="http://blog.davidpeterson.co.uk/2011/01/concordion-extensions.html">retain a clear separation between intent and implementation, yet allow non-developers to be reassured that the test has been implemented correctly</a>".</p>
    <p>By default this extension logs all output written using <code>java.util.logging</code>, with <a href="http://concordion.org/extensions/LoggingTooltipExtension.html#Configuration">configuration options</a> to restrict the output that is included.</p>
    
    <h4>ExceptionTranslatorDemo.html</h4>
     <p>Shows the use of the TranslatorExtension to remove debug information from the WebDriver exception output.</p>
    
    <h2>Potential Issues</h2>
    <h3>Proxy</h3>
    <p>If you are behind a HTTP proxy server, you may need to configure the proxy to allow access to www.google.com</p>
    <p>The easiest way to do this may be to add the following lines to the Site() constructor:</p>
    <pre>
    System.setProperty("http.proxyHost", "<i>proxy.host</i>");
    System.setProperty("http.proxyPort", "<i>proxy.port</i>");
    </pre>
    <p>where <i>proxy.host</i> is the host name of the proxy server, and <i>proxy.port</i> is the port number.</p>
    <p>If you require authentication, you will also need to set the properties <code>http.ProxyUser</code> and <code>http.proxyPassword</code>.</p>  
  
    <h2>Mailing List</h2>
    <p>Feel free to discuss these examples on the Concordion <a href="http://tech.groups.yahoo.com/group/concordion">mailing list</a>.</p>
    </div> <!-- content -->
    </div> <!-- page -->
    
    <div class="copyright">

     &nbsp; Copyright &copy; 2010-2011
     <a href="http://gplus.to/NigelCharman/about">Nigel Charman</a>. All rights reserved.
    </div> <!-- copyright -->
  </body>
</html>
